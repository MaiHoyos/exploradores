<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misi√≥n 1: Llanura de Vectonia</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .slide {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-bar {
            height: 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 5px;
            background: linear-gradient(90deg, #4ade80, #22d3ee);
            transition: width 0.5s ease;
        }
        
        .mission-badge {
            transition: transform 0.3s ease;
        }
        
        .mission-badge:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        input[type="number"], input[type="text"] {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            width: 100%;
        }
        
        input:focus {
            outline: none;
            border-color: #fbbf24;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(0, 0, 0, 0.3);
        }
        
        th, td {
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px;
            text-align: center;
        }
        
        th {
            background: rgba(255, 165, 0, 0.3);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-black text-white relative overflow-auto">
    <div class="stars" id="stars"></div>
    
    <header class="relative z-10 bg-gradient-to-r from-orange-400 to-orange-600 border-4 border-white rounded-b-3xl p-6 m-4">
        <div class="flex items-center justify-between">
            <button onclick="volverAMisiones()" class="px-4 py-2 bg-white text-orange-600 font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                ‚Üê Volver a Misiones
            </button>
            <div class="flex items-center space-x-4">
                <div class="text-3xl font-extrabold text-white drop-shadow-lg">MISI√ìN 1: LLANURA DE VECTONIA</div>
                <div class="text-4xl text-yellow-300">‚öôÔ∏è</div>
            </div>
            <div id="completion-badge" class="hidden px-4 py-2 bg-green-500 text-white font-bold rounded-full shadow-lg">
                ‚úÖ Completada
            </div>
        </div>
    </header>

    <main class="relative z-10 p-6 md:p-10 max-w-4xl mx-auto">
        <!-- Barra de progreso -->
        <div class="mb-8">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-semibold">Progreso de la misi√≥n</span>
                <span id="progress-text" class="text-sm font-semibold">1/14</span>
            </div>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill" style="width: 7%;"></div>
            </div>
        </div>
        
        <!-- Diapositivas de la misi√≥n -->
        <div class="slides-container">
            <!-- Diapositiva 1 - Portada -->
            <section class="slide active" id="slide-1">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4">üöÄ</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Llanura de Vectonia ‚Äì Calibra tu RoverBot</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">Acabas de aterrizar en Zython. Tu RoverBot debe recorrer exactamente la distancia hasta el primer punto de control. Calibra, prueba y registra como un aut√©ntico explorador.</p>
                        <p class="text-lg font-semibold text-yellow-300">Instrucci√≥n: Lee toda la gu√≠a antes de empezar. Re√∫ne los materiales listados en la siguiente diapositiva.</p>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button class="px-4 py-2 bg-gray-500 text-white font-bold rounded-full opacity-50 cursor-not-allowed">
                            Anterior
                        </button>
                        <button onclick="nextSlide(1)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 2 - Objetivos de aprendizaje -->
            <section class="slide" id="slide-2">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üéØ</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Objetivos de aprendizaje</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">Al completar la misi√≥n podr√°s:</p>
                        <ul class="list-disc list-inside space-y-3 text-white/90">
                            <li>Entender la relaci√≥n potencia ‚Äì tiempo ‚Äì distancia.</li>
                            <li>Medir y registrar datos reales.</li>
                            <li>Ajustar programaci√≥n para alcanzar una distancia objetivo.</li>
                            <li>Interpretar una tabla de ensayos y sacar conclusiones.</li>
                        </ul>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(2)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="nextSlide(2)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 3 - Materiales y preparaci√≥n -->
            <section class="slide" id="slide-3">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üîß</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Materiales y preparaci√≥n</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg font-semibold text-white mb-3">Necesitas:</p>
                        <ul class="list-disc list-inside space-y-2 text-white/90 mb-6">
                            <li>RoverBot (1 motor)</li>
                            <li>Cinta m√©trica</li>
                            <li>Cinta adhesiva</li>
                            <li>Plantilla de tabla (impresa/digital)</li>
                            <li>Dispositivo con LEGO WeDo 2.0</li>
                            <li>Superficie plana ‚â•1 m</li>
                        </ul>
                        
                        <p class="text-lg font-semibold text-white mb-3">Preparaci√≥n (pasos):</p>
                        <ol class="list-decimal list-inside space-y-2 text-white/90">
                            <li>Marca la l√≠nea de salida con cinta.</li>
                            <li>Marca el objetivo (ej. 50 cm desde la salida).</li>
                            <li>Conecta RoverBot y abre la app. Revisa bater√≠a y que la llanta no resbale.</li>
                        </ol>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(3)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="nextSlide(3)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 4 - Paso 1: Predicci√≥n -->
            <section class="slide" id="slide-4">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üìù</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Paso 1: Predicci√≥n</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">Qu√© hacer (paso a paso):</p>
                        <ol class="list-decimal list-inside space-y-2 text-white/90 mb-6">
                            <li>Escribe la distancia objetivo (por defecto: 50 cm).</li>
                            <li>Haz una predicci√≥n: ¬øqu√© potencia (%) y qu√© tiempo (s) crees necesitar?</li>
                        </ol>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block mb-2">Distancia objetivo (cm):</label>
                                <input type="number" id="distancia-objetivo" value="50" min="1" max="100">
                            </div>
                            <div>
                                <label class="block mb-2">Predicci√≥n - Potencia (%):</label>
                                <input type="number" id="prediccion-potencia" min="0" max="100" placeholder="Ej: 50">
                            </div>
                            <div>
                                <label class="block mb-2">Predicci√≥n - Tiempo (s):</label>
                                <input type="number" id="prediccion-tiempo" min="0.1" step="0.1" placeholder="Ej: 2.0">
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block mb-2">Raz√≥n breve:</label>
                            <input type="text" id="razon-prediccion" placeholder="Creo esto porque...">
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(4)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="savePrediction(); nextSlide(4)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 5 - Paso 2: Programaci√≥n inicial -->
            <section class="slide" id="slide-5">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üß©</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Paso 2: Programaci√≥n inicial</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">Instrucciones:</p>
                        <ol class="list-decimal list-inside space-y-2 text-white/90 mb-6">
                            <li>Crea un programa simple: Motor ON a <span id="potencia-predicha"></span>% durante <span id="tiempo-predicho"></span> s. (Bloques en WeDo).</li>
                            <li>Coloca RoverBot en la l√≠nea de salida. Comprueba que nada obstruye su avance.</li>
                            <li>Ejecuta 1 vez y observa. Graba en video (opcional pero recomendado).</li>
                        </ol>
                        
                        <div class="bg-yellow-900/30 p-4 rounded-lg border border-yellow-600 mt-4">
                            <p class="text-yellow-200 font-semibold">‚ö†Ô∏è Nota de seguridad: Mant√©n manos fuera del camino del robot mientras corre.</p>
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(5)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="nextSlide(5)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 6 - Paso 3: Medici√≥n y registro -->
            <section class="slide" id="slide-6">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üìè</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Paso 3: Medici√≥n y registro</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">Medir: Usa la cinta m√©trica desde la l√≠nea de salida hasta el punto donde se detuvo la rueda delantera. Anota la distancia en cm.</p>
                        
                        <p class="text-lg font-semibold text-white mt-6 mb-3">Registra tu primer intento:</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block mb-2">Potencia (%):</label>
                                <input type="number" id="intento1-potencia" min="0" max="100">
                            </div>
                            <div>
                                <label class="block mb-2">Tiempo (s):</label>
                                <input type="number" id="intento1-tiempo" min="0.1" step="0.1">
                            </div>
                            <div>
                                <label class="block mb-2">Distancia (cm):</label>
                                <input type="number" id="intento1-distancia" min="0" step="0.1">
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block mb-2">¬øLleg√≥ al objetivo?</label>
                            <select id="intento1-resultado" class="bg-gray-800 text-white p-2 rounded w-full">
                                <option value="no">No</option>
                                <option value="casi">Casi</option>
                                <option value="si">S√≠</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(6)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="saveAttempt(1); nextSlide(6)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 7 - Paso 4: Analiza y decide ajustes -->
            <section class="slide" id="slide-7">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üîç</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Paso 4: Analiza y decide ajustes</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">C√≥mo decidir qu√© cambiar:</p>
                        <ul class="list-disc list-inside space-y-2 text-white/90 mb-6">
                            <li>Si distancia < objetivo ‚Üí aumentar potencia o tiempo.</li>
                            <li>Si distancia > objetivo ‚Üí reducir potencia o tiempo.</li>
                        </ul>
                        
                        <p class="text-lg text-white/90 mb-4">Estrategia simple: cambia solo una variable por intento (p. ej. +10% potencia o +0.2 s) para ver el efecto.</p>
                        
                        <div class="mt-6">
                            <label class="block mb-2">Registro de la decisi√≥n:</label>
                            <input type="text" id="decision-ajuste" placeholder="Cambi√© ____ porque ____ (esperaba ____).">
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(7)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="saveAdjustment(); nextSlide(7)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 8 - Paso 5: Repetir y confirmar -->
            <section class="slide" id="slide-8">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üîÑ</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Paso 5: Repetir y confirmar</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg text-white/90 mb-4">Meta: Tener al menos 3 intentos documentados y 1 intento exitoso.</p>
                        
                        <p class="text-lg font-semibold text-white mt-6 mb-3">Registra tus intentos adicionales:</p>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full mb-4">
                                <thead>
                                    <tr>
                                        <th>Intento</th>
                                        <th>Potencia (%)</th>
                                        <th>Tiempo (s)</th>
                                        <th>Distancia (cm)</th>
                                        <th>¬øLleg√≥?</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2</td>
                                        <td><input type="number" id="intento2-potencia" min="0" max="100" class="w-full bg-transparent border-none text-center"></td>
                                        <td><input type="number" id="intento2-tiempo" min="0.1" step="0.1" class="w-full bg-transparent border-none text-center"></td>
                                        <td><input type="number" id="intento2-distancia" min="0" step="0.1" class="w-full bg-transparent border-none text-center"></td>
                                        <td>
                                            <select id="intento2-resultado" class="bg-transparent border-none text-center w-full">
                                                <option value="no">No</option>
                                                <option value="casi">Casi</option>
                                                <option value="si">S√≠</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td><input type="number" id="intento3-potencia" min="0" max="100" class="w-full bg-transparent border-none text-center"></td>
                                        <td><input type="number" id="intento3-tiempo" min="0.1" step="0.1" class="w-full bg-transparent border-none text-center"></td>
                                        <td><input type="number" id="intento3-distancia" min="0" step="0.1" class="w-full bg-transparent border-none text-center"></td>
                                        <td>
                                            <select id="intento3-resultado" class="bg-transparent border-none text-center w-full">
                                                <option value="no">No</option>
                                                <option value="casi">Casi</option>
                                                <option value="si">S√≠</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>4 (opcional)</td>
                                        <td><input type="number" id="intento4-potencia" min="0" max="100" class="w-full bg-transparent border-none text-center"></td>
                                        <td><input type="number" id="intento4-tiempo" min="0.1" step="0.1" class="w-full bg-transparent border-none text-center"></td>
                                        <td><input type="number" id="intento4-distancia" min="0" step="0.1" class="w-full bg-transparent border-none text-center"></td>
                                        <td>
                                            <select id="intento4-resultado" class="bg-transparent border-none text-center w-full">
                                                <option value="no">No</option>
                                                <option value="casi">Casi</option>
                                                <option value="si">S√≠</option>
                                            </select>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-4">
                            <label class="inline-flex items-center">
                                <input type="checkbox" id="video-check" class="form-checkbox h-5 w-5 text-blue-600">
                                <span class="ml-2">He grabado un video del intento exitoso</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(8)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="saveAdditionalAttempts(); nextSlide(8)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 9 - Paso 6: Conclusi√≥n y reflexi√≥n -->
            <section class="slide" id="slide-9">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üßæ</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Paso 6: Conclusi√≥n y reflexi√≥n</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <div class="mb-6">
                            <label class="block mb-2">Completa la frase:</label>
                            <input type="text" id="conclusion-frase" placeholder="Para llegar a 50 cm, nuestro RoverBot debe tener una potencia de ___% y un tiempo de ___ s." class="w-full">
                        </div>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block mb-2">¬øQu√© pas√≥ cuando aumentamos la potencia sin cambiar el tiempo?</label>
                                <textarea id="reflexion-1" rows="2" class="w-full bg-gray-800 text-white p-2 rounded" placeholder="Escribe tu respuesta aqu√≠..."></textarea>
                            </div>
                            
                            <div>
                                <label class="block mb-2">¬øPudimos lograr 50 cm con varias combinaciones? Da un ejemplo.</label>
                                <textarea id="reflexion-2" rows="2" class="w-full bg-gray-800 text-white p-2 rounded" placeholder="Escribe tu respuesta aqu√≠..."></textarea>
                            </div>
                            
                            <div>
                                <label class="block mb-2">¬øC√≥mo usar√≠as estos datos en la pr√≥xima misi√≥n?</label>
                                <textarea id="reflexion-3" rows="2" class="w-full bg-gray-800 text-white p-2 rounded" placeholder="Escribe tu respuesta aqu√≠..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(9)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="saveReflection(); nextSlide(9)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 10 - Producto final y r√∫brica -->
            <section class="slide" id="slide-10">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üì¶</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Producto final y r√∫brica de evidencias</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <p class="text-lg font-semibold text-white mb-3">Entregable: carpeta con:</p>
                        <ul class="list-disc list-inside space-y-2 text-white/90 mb-6">
                            <li>Tabla completa (m√≠n. 3 intentos)</li>
                            <li>Video del intento exitoso (30‚Äì60 s)</li>
                            <li>Reflexi√≥n (escrita o audio)</li>
                            <li>(Opcional) Gr√°fica de barras: distancia vs intento</li>
                        </ul>
                        
                        <p class="text-lg font-semibold text-white mb-3">R√∫brica r√°pida (3 niveles):</p>
                        <ul class="space-y-2 text-white/90">
                            <li><span class="font-semibold text-green-400">Logrado:</span> Tabla completa + video con evidencia clara + reflexi√≥n coherente.</li>
                            <li><span class="font-semibold text-yellow-400">En proceso:</span> Tabla incompleta o video poco claro; reflexi√≥n limitada.</li>
                            <li><span class="font-semibold text-red-400">No logrado:</span> Falta la mayor√≠a de evidencias.</li>
                        </ul>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(10)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="nextSlide(10)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 11 - Diferenciaci√≥n y extensi√≥n -->
            <section class="slide" id="slide-11">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">üåü</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Diferenciaci√≥n y extensi√≥n</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <div class="mb-6">
                            <p class="text-lg font-semibold text-white mb-2">Niveles de dificultad:</p>
                            <ul class="space-y-3 text-white/90">
                                <li><span class="font-semibold text-green-400">üü¢ B√°sico:</span> fija la potencia y solo ajusta tiempo.</li>
                                <li><span class="font-semibold text-yellow-400">üü° Medio:</span> ajusta libremente potencia y tiempo; busca 2 combinaciones que funcionen.</li>
                                <li><span class="font-semibold text-blue-400">üîµ Avanzado:</span> predice la distancia para un valor nuevo (ej. 60% / 1.5 s), prueba y compara; calcula velocidad promedio (cm/s) y discute proporcionalidad.</li>
                            </ul>
                        </div>
                        
                        <div>
                            <p class="text-lg font-semibold text-white mb-2">Extensi√≥n:</p>
                            <p class="text-white/90">Crea una gr√°fica (distancia vs potencia) y escribe 2 conclusiones.</p>
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(11)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="nextSlide(11)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 12 - Autoevaluaci√≥n -->
            <section class="slide" id="slide-12">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">‚úÖ</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Autoevaluaci√≥n y checklist final</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <div class="space-y-4">
                            <label class="flex items-start">
                                <input type="checkbox" id="check-1" class="form-checkbox h-5 w-5 text-blue-600 mt-1">
                                <span class="ml-2">Prepar√© el √°rea y marqu√© 50 cm.</span>
                            </label>
                            
                            <label class="flex items-start">
                                <input type="checkbox" id="check-2" class="form-checkbox h-5 w-5 text-blue-600 mt-1">
                                <span class="ml-2">Registr√© al menos 3 intentos en la tabla.</span>
                            </label>
                            
                            <label class="flex items-start">
                                <input type="checkbox" id="check-3" class="form-checkbox h-5 w-5 text-blue-600 mt-1">
                                <span class="ml-2">Tengo video del intento exitoso.</span>
                            </label>
                            
                            <label class="flex items-start">
                                <input type="checkbox" id="check-4" class="form-checkbox h-5 w-5 text-blue-600 mt-1">
                                <span class="ml-2">Guard√© el proyecto en la app.</span>
                            </label>
                            
                            <label class="flex items-start">
                                <input type="checkbox" id="check-5" class="form-checkbox h-5 w-5 text-blue-600 mt-1">
                                <span class="ml-2">Entregu√© reflexi√≥n.</span>
                            </label>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <p class="text-lg font-semibold text-yellow-300">Al completar todo: reclama tu Insignia üõ†Ô∏è Calibrador Estelar.</p>
                            <div class="mission-badge inline-block mt-4 p-4 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-full text-4xl">
                                üõ†Ô∏è
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(12)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="completeMission(); nextSlide(12)" class="px-6 py-2 bg-gradient-to-r from-green-500 to-green-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Completar Misi√≥n
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 13 - Consejos r√°pidos -->
            <section class="slide" id="slide-13">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">‚öôÔ∏è</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Consejos r√°pidos y soluci√≥n de problemas</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <ul class="space-y-3 text-white/90">
                            <li><span class="font-semibold">Si el robot gira:</span> revisa que las ruedas est√©n alineadas.</li>
                            <li><span class="font-semibold">Si recorre menos cada intento:</span> revisa bater√≠a o superficie irregular.</li>
                            <li><span class="font-semibold">Si salta o patina:</span> usa una superficie con fricci√≥n moderada.</li>
                            <li><span class="font-semibold">Consejo para precisi√≥n:</span> haz cambios peque√±os (¬±5‚Äì15% potencia o ¬±0.1‚Äì0.3 s) hasta afinar.</li>
                        </ul>
                    </div>
                    
                    <div class="flex justify-between mt-8">
                        <button onclick="prevSlide(13)" class="px-4 py-2 bg-gray-600 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            ‚Üê Anterior
                        </button>
                        <button onclick="nextSlide(13)" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105">
                            Siguiente ‚Üí
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Diapositiva 14 - Siguiente misi√≥n -->
            <section class="slide" id="slide-14">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-6 md:p-8 border-4 border-white/30 shadow-2xl mb-8">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">‚ú®</div>
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-yellow-300">Siguiente misi√≥n / Ideas para continuar</h2>
                    </div>
                    
                    <div class="bg-black/40 p-6 rounded-xl border-2 border-white/40 mb-6">
                        <ul class="list-disc list-inside space-y-3 text-white/90">
                            <li>Repite la actividad con otra distancia (ej. 30 cm o 80 cm) y compara.</li>
                            <li>Dise√±a un desaf√≠o de equipo: ¬øqu√© combinaci√≥n logra exactamente 1 m con menor energ√≠a total?</li>
                            <li>(Opcional) Registra tus datos en una hoja de c√°lculo y crea la gr√°fica.</li>
                        </ul>
                    </div>
                    
                    <div class="text-center mt-8">
                        <p class="text-lg font-semibold text-yellow-300 mb-4">¬°Felicidades! Has completado la Misi√≥n 1: Llanura de Vectonia</p>
                        <button onclick="volverAMisiones()" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-700 text-white font-bold rounded-full shadow-lg transition-transform transform hover:scale-105 text-xl">
                            Volver al Centro de Misiones
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Variables globales
        let currentSlide = 1;
        const totalSlides = 14;
        let missionData = {};
        
        // Crear estrellas de fondo
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starsCount = 150;
            
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // Posici√≥n aleatoria
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                
                // Tama√±o aleatorio
                const size = Math.random() * 3;
                
                // Establecer estilos
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // Retraso de animaci√≥n aleatorio
                star.style.animationDelay = `${Math.random() * 3}s`;
                
                starsContainer.appendChild(star);
            }
        }
        
        // Navegaci√≥n entre diapositivas
        function showSlide(slideNumber) {
            // Ocultar todas las diapositivas
            document.querySelectorAll('.slide').forEach(slide => {
                slide.classList.remove('active');
            });
            
            // Mostrar la diapositiva actual
            document.getElementById(`slide-${slideNumber}`).classList.add('active');
            
            // Actualizar barra de progreso
            const progressPercentage = (slideNumber / totalSlides) * 100;
            document.getElementById('progress-fill').style.width = `${progressPercentage}%`;
            document.getElementById('progress-text').textContent = `${slideNumber}/${totalSlides}`;
            
            // Actualizar slide actual
            currentSlide = slideNumber;
            
            // Si estamos en la diapositiva 5, mostrar los valores predichos
            if (slideNumber === 5) {
                document.getElementById('potencia-predicha').textContent = missionData.prediccionPotencia || '___';
                document.getElementById('tiempo-predicho').textContent = missionData.prediccionTiempo || '___';
            }
            
            // Si estamos en la √∫ltima diapositiva y la misi√≥n est√° completada, mostrar la insignia
            if (slideNumber === 14 && localStorage.getItem('mision1Completada')) {
                document.getElementById('completion-badge').classList.remove('hidden');
            }
        }
        
        function nextSlide(current) {
            if (current < totalSlides) {
                showSlide(current + 1);
            }
        }
        
        function prevSlide(current) {
            if (current > 1) {
                showSlide(current - 1);
            }
        }
        
        // Guardar predicci√≥n
        function savePrediction() {
            missionData.distanciaObjetivo = document.getElementById('distancia-objetivo').value;
            missionData.prediccionPotencia = document.getElementById('prediccion-potencia').value;
            missionData.prediccionTiempo = document.getElementById('prediccion-tiempo').value;
            missionData.razonPrediccion = document.getElementById('razon-prediccion').value;
            
            // Guardar en localStorage
            localStorage.setItem('mision1Data', JSON.stringify(missionData));
        }
        
        // Guardar intento
        function saveAttempt(attemptNumber) {
            if (!missionData.attempts) {
                missionData.attempts = {};
            }
            
            missionData.attempts[attemptNumber] = {
                potencia: document.getElementById(`intento${attemptNumber}-potencia`).value,
                tiempo: document.getElementById(`intento${attemptNumber}-tiempo`).value,
                distancia: document.getElementById(`intento${attemptNumber}-distancia`).value,
                resultado: document.getElementById(`intento${attemptNumber}-resultado`).value
            };
            
            localStorage.setItem('mision1Data', JSON.stringify(missionData));
        }
        
        // Guardar ajuste
        function saveAdjustment() {
            missionData.decisionAjuste = document.getElementById('decision-ajuste').value;
            localStorage.setItem('mision1Data', JSON.stringify(missionData));
        }
        
        // Guardar intentos adicionales
        function saveAdditionalAttempts() {
            for (let i = 2; i <= 4; i++) {
                const potencia = document.getElementById(`intento${i}-potencia`).value;
                if (potencia) {
                    saveAttempt(i);
                }
            }
            
            missionData.videoGrabado = document.getElementById('video-check').checked;
            localStorage.setItem('mision1Data', JSON.stringify(missionData));
        }
        
        // Guardar reflexi√≥n
        function saveReflection() {
            missionData.conclusion = document.getElementById('conclusion-frase').value;
            missionData.reflexion1 = document.getElementById('reflexion-1').value;
            missionData.reflexion2 = document.getElementById('reflexion-2').value;
            missionData.reflexion3 = document.getElementById('reflexion-3').value;
            
            localStorage.setItem('mision1Data', JSON.stringify(missionData));
        }
        
        // Completar misi√≥n - ESTA ES LA FUNCI√ìN CLAVE QUE FIX EL PROBLEMA
        function completeMission() {
            // Marcar todos los checks como completados
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`check-${i}`).checked = true;
            }
            
            // Guardar en localStorage que la misi√≥n est√° completada
            localStorage.setItem('mision1Completada', 'true');
            
            // Mostrar badge de completado
            document.getElementById('completion-badge').classList.remove('hidden');
            
            // Guardar datos finales
            missionData.completada = true;
            missionData.fechaCompletada = new Date().toISOString();
            localStorage.setItem('mision1Data', JSON.stringify(missionData));
            
            // AQU√ç EST√Å EL FIX: Actualizar el progreso del jugador para desbloquear la misi√≥n 2
            const currentPlayer = localStorage.getItem('zython-current-player');
            if (currentPlayer) {
                let players = JSON.parse(localStorage.getItem('zython-players') || '{}');
                if (!players[currentPlayer]) {
                    players[currentPlayer] = {
                        completedMissions: [],
                        completed: 0,
                        currentMission: 1
                    };
                }
                
                // Agregar misi√≥n 1 como completada si no est√° ya
                if (!players[currentPlayer].completedMissions.includes(1)) {
                    players[currentPlayer].completedMissions.push(1);
                    players[currentPlayer].completed = players[currentPlayer].completedMissions.length;
                    players[currentPlayer].currentMission = 2; // Desbloquear misi√≥n 2
                }
                
                localStorage.setItem('zython-players', JSON.stringify(players));
            }
            
            alert('¬°Felicidades! Has completado la Misi√≥n 1: Llanura de Vectonia. ¬°Eres un aut√©ntico Calibrador Estelar!');
        }
        
        // AQU√ç EST√Å EL FIX PRINCIPAL: Funci√≥n que realmente redirige al index
        function volverAMisiones() {
            // Redirigir al index.html
            window.location.href = 'index.html';
        }
        
        // Cargar datos guardados al iniciar
        function loadSavedData() {
            const savedData = localStorage.getItem('mision1Data');
            if (savedData) {
                missionData = JSON.parse(savedData);
                
                // Rellenar campos con datos guardados
                if (missionData.distanciaObjetivo) {
                    document.getElementById('distancia-objetivo').value = missionData.distanciaObjetivo;
                }
                
                if (missionData.prediccionPotencia) {
                    document.getElementById('prediccion-potencia').value = missionData.prediccionPotencia;
                }
                
                if (missionData.prediccionTiempo) {
                    document.getElementById('prediccion-tiempo').value = missionData.prediccionTiempo;
                }
                
                if (missionData.razonPrediccion) {
                    document.getElementById('razon-prediccion').value = missionData.razonPrediccion;
                }
                
                // Cargar intentos
                if (missionData.attempts) {
                    for (let i = 1; i <= 4; i++) {
                        if (missionData.attempts[i]) {
                            const potenciaInput = document.getElementById(`intento${i}-potencia`);
                            const tiempoInput = document.getElementById(`intento${i}-tiempo`);
                            const distanciaInput = document.getElementById(`intento${i}-distancia`);
                            const resultadoSelect = document.getElementById(`intento${i}-resultado`);
                            
                            if (potenciaInput) potenciaInput.value = missionData.attempts[i].potencia;
                            if (tiempoInput) tiempoInput.value = missionData.attempts[i].tiempo;
                            if (distanciaInput) distanciaInput.value = missionData.attempts[i].distancia;
                            if (resultadoSelect) resultadoSelect.value = missionData.attempts[i].resultado;
                        }
                    }
                }
                
                if (missionData.decisionAjuste) {
                    document.getElementById('decision-ajuste').value = missionData.decisionAjuste;
                }
                
                if (missionData.videoGrabado) {
                    document.getElementById('video-check').checked = missionData.videoGrabado;
                }
                
                if (missionData.conclusion) {
                    document.getElementById('conclusion-frase').value = missionData.conclusion;
                }
                
                if (missionData.reflexion1) {
                    document.getElementById('reflexion-1').value = missionData.reflexion1;
                }
                
                if (missionData.reflexion2) {
                    document.getElementById('reflexion-2').value = missionData.reflexion2;
                }
                
                if (missionData.reflexion3) {
                    document.getElementById('reflexion-3').value = missionData.reflexion3;
                }
            }
            
            // Comprobar si la misi√≥n ya estaba completada
            if (localStorage.getItem('mision1Completada')) {
                document.getElementById('completion-badge').classList.remove('hidden');
                
                // Marcar checks como completados
                for (let i = 1; i <= 5; i++) {
                    const checkbox = document.getElementById(`check-${i}`);
                    if (checkbox) checkbox.checked = true;
                }
            }
        }
        
        // Inicializar cuando se carga la p√°gina
        window.onload = function() {
            createStars();
            showSlide(1);
            loadSavedData();
        };
    </script>
</body>
</html>
