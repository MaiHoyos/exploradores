<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exploraci√≥n de Zython - Misiones Espaciales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes planetBounce {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-15px) scale(1.05); }
        }
        
        .animate-planet-bounce {
            animation: planetBounce 4s ease-in-out infinite;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        @keyframes pathFlow {
            0% { stroke-dashoffset: 20; }
            100% { stroke-dashoffset: 0; }
        }
        
        .animate-path-flow {
            animation: pathFlow 3s linear infinite;
        }

        .disabled-path {
            opacity: 0.3;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-black text-white overflow-x-hidden">
    <div class="stars" id="stars"></div>

    <div class="relative z-10 p-6 md:p-12 min-h-screen flex flex-col justify-center">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                Exploraci√≥n de Zython
            </h1>
            <p class="text-xl md:text-2xl text-white/80">Selecciona tu pr√≥xima misi√≥n para explorar el planeta.</p>
        </header>

        <main class="relative w-full max-w-4xl mx-auto flex items-center justify-center">
            
            <svg class="absolute inset-0 w-full h-full" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid meet">
                <defs>
                    <marker id="arrowhead" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="white" />
                    </marker>
                </defs>
                <path id="path-1" d="M 400 100 Q 500 250, 600 100" class="stroke-white stroke-2 fill-none transition-opacity duration-500 disabled-path" />
                <path id="path-2" d="M 600 100 Q 750 250, 750 400" class="stroke-white stroke-2 fill-none transition-opacity duration-500 disabled-path" />
                <path id="path-3" d="M 400 500 Q 250 400, 250 250" class="stroke-white stroke-2 fill-none transition-opacity duration-500 disabled-path" />
                <path id="path-4" d="M 750 400 Q 600 500, 400 500" class="stroke-white stroke-2 fill-none transition-opacity duration-500 disabled-path" />
            </svg>

            <a href="mision1.html" id="mission-1" class="absolute top-[8%] left-[25%] mission-link transition-transform duration-300 hover:scale-110 disabled opacity-50 cursor-not-allowed">
                <div class="animate-planet-bounce p-4 rounded-full bg-blue-500/30 backdrop-blur-sm border-2 border-blue-400/50">
                    <div class="text-7xl">üèîÔ∏è</div>
                </div>
                <div class="text-center mt-2 text-white font-bold text-lg">Llanura de Vectonia</div>
            </a>
            
            <a href="mision2.html" id="mission-2" class="absolute top-[8%] right-[25%] mission-link transition-transform duration-300 hover:scale-110 disabled opacity-50 cursor-not-allowed">
                <div class="animate-planet-bounce p-4 rounded-full bg-yellow-500/30 backdrop-blur-sm border-2 border-yellow-400/50">
                    <div class="text-7xl">üåÄ</div>
                </div>
                <div class="text-center mt-2 text-white font-bold text-lg">Paso de Zycurva</div>
            </a>
            
            <a href="mision3.html" id="mission-3" class="absolute bottom-[8%] left-[25%] mission-link transition-transform duration-300 hover:scale-110 disabled opacity-50 cursor-not-allowed">
                <div class="animate-planet-bounce p-4 rounded-full bg-red-500/30 backdrop-blur-sm border-2 border-red-400/50">
                    <div class="text-7xl">üï≥Ô∏è</div>
                </div>
                <div class="text-center mt-2 text-white font-bold text-lg">Cr√°ter del Sensorium</div>
            </a>

            <a href="mision4.html" id="mission-4" class="absolute bottom-[8%] right-[25%] mission-link transition-transform duration-300 hover:scale-110 disabled opacity-50 cursor-not-allowed">
                <div class="animate-planet-bounce p-4 rounded-full bg-green-500/30 backdrop-blur-sm border-2 border-green-400/50">
                    <div class="text-7xl">üöõ</div>
                </div>
                <div class="text-center mt-2 text-white font-bold text-lg">Estaci√≥n de Transferencia</div>
            </a>
            
            <div id="mission-0" class="relative z-20 flex flex-col items-center">
                <div class="animate-planet-bounce p-6 rounded-full bg-gray-500/30 backdrop-blur-sm border-2 border-gray-400/50">
                    <div class="text-8xl">üöÄ</div>
                </div>
                <div class="text-center mt-4 text-white font-bold text-2xl">Misi√≥n 0</div>
                <div class="text-center mt-1 text-green-400 font-semibold" id="mission-0-status">Completada</div>
            </div>
        </main>

        <footer class="mt-12 text-center">
            <button id="reset-button" class="mt-8 px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg text-white font-bold transition-all duration-300">
                Reiniciar Progreso
            </button>
        </footer>
    </div>

    <script>
        // Create stars background
        function createStars() {
            const starsContainer = document.getElementById('stars');
            if (!starsContainer) return;
            
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Logic to setup the game state based on localStorage
        function setupGame(playerName) {
            let players = JSON.parse(localStorage.getItem('zython-players') || '{}');
            
            if (!players[playerName]) {
                // If player doesn't exist, create initial state
                players[playerName] = {
                    missions: {
                        'mission-0': { completed: false, name: 'Misi√≥n 0' },
                        'mission-1': { completed: false, name: 'Llanura de Vectonia' },
                        'mission-2': { completed: false, name: 'Paso de Zycurva' },
                        'mission-3': { completed: false, name: 'Cr√°ter del Sensorium' },
                        'mission-4': { completed: false, name: 'Estaci√≥n de Transferencia' }
                    }
                };
            }
            localStorage.setItem('zython-players', JSON.stringify(players));
            checkMissionStatus(playerName, players[playerName]);
        }

        function checkMissionStatus(playerName, player) {
            // Logic to check if a mission is unlocked and update its appearance
            const missionLinks = document.querySelectorAll('.mission-link');
            const pathElements = document.querySelectorAll('path');

            // Misi√≥n 0 is unlocked by default for new players, but becomes completed after the intro
            if (player.missions['mission-0'].completed) {
                const mission0Status = document.getElementById('mission-0-status');
                if (mission0Status) {
                    mission0Status.textContent = 'Completada';
                    mission0Status.classList.remove('text-red-400');
                    mission0Status.classList.add('text-green-400');
                }
            } else {
                // If mission 0 is not completed, disable all other missions
                missionLinks.forEach(link => {
                    link.classList.add('disabled', 'opacity-50', 'cursor-not-allowed');
                    link.href = '#';
                });
                pathElements.forEach(path => {
                    path.classList.add('disabled-path');
                    path.classList.remove('animate-path-flow');
                });
                return;
            }

            // Misi√≥n 1 is unlocked once Misi√≥n 0 is completed
            if (player.missions['mission-0'].completed) {
                const mission1 = document.getElementById('mission-1');
                const path1 = document.getElementById('path-1');
                if (mission1) {
                    mission1.classList.remove('disabled', 'opacity-50', 'cursor-not-allowed');
                    mission1.href = 'mision1.html';
                }
                if (path1) {
                    path1.classList.remove('disabled-path');
                    path1.classList.add('animate-path-flow');
                }
            }

            // Logic to unlock other missions based on previous completions
            if (player.missions['mission-1'].completed) {
                const mission2 = document.getElementById('mission-2');
                const path2 = document.getElementById('path-2');
                if (mission2) {
                    mission2.classList.remove('disabled', 'opacity-50', 'cursor-not-allowed');
                    mission2.href = 'mision2.html';
                }
                if (path2) {
                    path2.classList.remove('disabled-path');
                    path2.classList.add('animate-path-flow');
                }
            }

            if (player.missions['mission-2'].completed) {
                const mission3 = document.getElementById('mission-3');
                const path3 = document.getElementById('path-3');
                if (mission3) {
                    mission3.classList.remove('disabled', 'opacity-50', 'cursor-not-allowed');
                    mission3.href = 'mision3.html';
                }
                if (path3) {
                    path3.classList.remove('disabled-path');
                    path3.classList.add('animate-path-flow');
                }
            }

            if (player.missions['mission-3'].completed) {
                const mission4 = document.getElementById('mission-4');
                const path4 = document.getElementById('path-4');
                if (mission4) {
                    mission4.classList.remove('disabled', 'opacity-50', 'cursor-not-allowed');
                    mission4.href = 'mision4.html';
                }
                if (path4) {
                    path4.classList.remove('disabled-path');
                    path4.classList.add('animate-path-flow');
                }
            }
        }
        
        // Function to reset the game
        function resetGame() {
            const currentPlayer = localStorage.getItem('zython-current-player');
            if (currentPlayer) {
                localStorage.removeItem('zython-players');
            }
            window.location.reload();
        }

        // Initialize application
        function initialize() {
            createStars();
            const playerName = "Explorador 1";
            localStorage.setItem('zython-current-player', playerName);
            
            // Check if Misi√≥n 0 has been completed
            const urlParams = new URLSearchParams(window.location.search);
            const mission0Completed = urlParams.get('mision0_completed');
            if (mission0Completed === 'true') {
                const players = JSON.parse(localStorage.getItem('zython-players') || '{}');
                if (players[playerName]) {
                    players[playerName].missions['mission-0'].completed = true;
                    localStorage.setItem('zython-players', JSON.stringify(players));
                }
            }

            setupGame(playerName);
            
            // Assign click event to reset button
            document.getElementById('reset-button').addEventListener('click', resetGame);
        }

        // Start when page loads
        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>
